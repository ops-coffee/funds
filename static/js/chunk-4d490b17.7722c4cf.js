(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d490b17"],{"527b":function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return M}));n("a481"),n("4917"),n("456d"),n("c698"),n("ac6a"),n("6b54");var a,s,o=n("bc3a"),i=n.n(o),r=Object.prototype.toString,l=null,c=[],d=1,u=1,h=1,g=null;function v(e){return"[object Object]"===r.call(e)}function p(){}var f={get:function(e){var t={};return e||Reflect.ownKeys(localStorage).forEach((function(e){var n=localStorage[e];try{n=JSON.parse(localStorage[e])}catch(a){}t[e]=n})),"string"===typeof e&&(e=[e]),Array.isArray(e)&&e.forEach((function(e){var n=localStorage.getItem(e);try{n=JSON.parse(localStorage.getItem(e))}catch(a){}t[e]=n})),Promise.resolve(t)},set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;if(!v(e))return Promise.reject("Please pass in an object");Reflect.ownKeys(e).forEach((function(t){localStorage.setItem(t,JSON.stringify(e[t]))})),t()}},w=function(){var e=8,t=60*(new Date).getTimezoneOffset()*1e3,n=(new Date).getTime(),a=new Date(n+t+60*e*60*1e3);if(x(a))return!1;var s=new Date,o=new Date,i=new Date,r=new Date;return s.setHours(9,30,0),o.setHours(11,35,0),i.setHours(13,0,0),r.setHours(15,5,0),"6"!=a.getDay()&&"0"!=a.getDay()&&(a>=s&&a<=o||a>=i&&a<=r)},m=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))},b=function(){var e="/rabt/funds/holiday.json";return i.a.get(e)},x=function(e){var t=e.getMonth()+1,n=e.getFullYear(),a=e.getDate();t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a);var o=!1,i=t+"-"+a,r=s.data;for(var l in r)if(r.hasOwnProperty(l)){var c=r[l];if(l==n)for(var d in c)if(c.hasOwnProperty(d)){var u=c[d];i==d&&u.holiday&&(o=!0)}}return o},y=function(e){var t=parseFloat(e),n=Math.abs(t);return n<10?t.toFixed(2):n<100?t.toFixed(1):n<1e3?t.toFixed(0):n<1e4?(t/1e3).toFixed(1)+"k":n<1e6?(t/1e3).toFixed(0)+"k":n<1e7?(t/1e6).toFixed(1)+"M":(t/1e6).toFixed(0)+"M"},C=function(e,t,n){var a=null;a=1==n?e:c.map((function(e){return e.code})).join(",");var s="https://fundmobapi.eastmoney.com/FundMNewApi/FundMNFInfo?pageIndex=1&pageSize=50&plat=Android&appType=ttjj&product=EFund&Version=1&deviceid="+g+"&Fcodes="+a;i.a.get(s).then((function(e){var t=0,a=0,s=null;if(1==n){var o=e.Datas[0],i={fundcode:o.FCODE,name:o.SHORTNAME,jzrq:o.PDATE,dwjz:o.NAV,gsz:isNaN(o.GSZ)?null:o.GSZ,gszzl:isNaN(o.GSZZL)?0:o.GSZZL,gztime:o.GZTIME,num:0},r=c.filter((function(e){return e.code==i.fundcode}));if(!r.length)return!1;i.num=r[0].num;var l=0,d=i.num?i.num:0;o.PDATE==o.GZTIME.substr(0,10)?(i.gsz=o.NAV,i.gszzl=isNaN(o.NAVCHGRT)?0:o.NAVCHGRT,l=((i.dwjz-i.dwjz/(1+.01*i.gszzl))*d).toFixed(1)):i.gsz&&(l=((i.gsz-i.dwjz)*d).toFixed(1)),s=1==h?i.gszzl+"%":0!=d?y(l):"0"}else e.Datas.forEach((function(e){var n=c.filter((function(t){return t.code==e.FCODE})),s=n[0].num?n[0].num:0;t+=e.NAV*s;var o=0;if(e.PDATE==e.GZTIME.substr(0,10))o=(e.NAV-e.NAV/(1+.01*e.NAVCHGRT))*s;else{var i=isNaN(e.GSZ)?null:e.GSZ;i&&(o=(i-e.NAV)*s)}a+=o})),s=1==h?0==t||0==a?"0":(100*a/t).toFixed(2)+"%":y(a);M.browserAction.setBadgeText({text:s})})).catch((function(e){}))},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;A(a);var n=w();e=e,C(e,n,t),a=setInterval((function(){w()&&C(e,!0,t)}),12e4)},A=function(){clearInterval(a),M.browserAction.setBadgeText({text:"自选基金"})},k=function(e){1==d&&1==u?e?B(e):A():1==d&&2==u?B(null,2):A()},G=function(){f.get(["holiday","fundListM","RealtimeFundcode","showBadge","BadgeContent","BadgeType","userId"]).then((function(e){l=e.RealtimeFundcode?e.RealtimeFundcode:null,c=e.fundListM?e.fundListM:[],d=e.showBadge?e.showBadge:1,u=e.BadgeContent?e.BadgeContent:1,h=e.BadgeType?e.BadgeType:1,e.userId?g=e.userId:(g=m(),f.set({userId:g})),e.holiday?(s=e.holiday,k(l)):b().then((function(e){f.set({holiday:e},(function(){s=e,k(l)}))}))}))};G();var M={runtime:{sendMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;if("DuringDate"==e.type){var n=w();t({farewell:n})}if("refresh"==e.type&&G(),"refreshBadgeAllGains"==e.type){var a=0,s=0;e.data.forEach((function(e){var t=c.filter((function(t){return t.code==e.FCODE})),n=t[0].num?t[0].num:0;a+=e.NAV*n;var o=0;if(e.PDATE==e.GZTIME.substr(0,10))o=(e.NAV-e.NAV/(1+.01*e.NAVCHGRT))*n;else{var i=isNaN(e.GSZ)?null:e.GSZ;i&&(o=(i-e.NAV)*n)}s+=o}));var o=null;o=1==h?0==a||0==s?"0":(100*s/a).toFixed(2)+"%":y(s),M.browserAction.setBadgeText({text:o});w()}if("endInterval"==e.type&&A(),"startInterval"==e.type&&B(e.id),"refreshOption"==e.type){switch(e.data.type){case"showBadge":d=e.data.value;break;case"BadgeContent":u=e.data.value;break;case"BadgeType":h=e.data.value;break}G()}if("refreshBadge"==e.type){var i=null;i=1==h?e.data.gszzl+"%":y(e.data.gains),M.browserAction.setBadgeText({text:i});w()&&e.data.gszzl}}},browserAction:{setBadgeText:function(e){document.title=e.text}}}},9224:function(e){e.exports=JSON.parse('{"name":"crm2.0","version":"2.0.6","private":true,"scripts":{"serve":"vue-cli-service serve","dev":"vue-cli-service serve","build":"vue-cli-service build","lint":"vue-cli-service lint","analyz":"vue-cli-service build --mode analyze"},"dependencies":{"@antv/g6":"^2.1.2","@antv/g6-editor":"^1.2.0","axios":"^0.19.0","babel-polyfill":"^6.26.0","clipboard":"^2.0.4","core-js":"^2.6.5","echarts":"^4.2.1","element-china-area-data":"^4.1.2","element-ui":"^2.10.1","file-saver":"^2.0.2","iview":"^3.4.2","js-md5":"^0.7.3","jssip":"^3.3.11","less":"^3.9.0","lodash":"^4.17.14","moment":"^2.24.0","nprogress":"^0.2.0","sortablejs":"^1.10.0-rc3","svg-sprite-loader":"4.1.3","vue":"^2.6.10","vue-i18n":"^8.12.0","vue-router":"3.0.3","vuex":"^3.0.1","wangeditor":"^3.1.1","webpack-bundle-analyzer":"^3.9.0","xlsx":"^0.14.4"},"devDependencies":{"@vue/cli-plugin-babel":"^3.9.0","@vue/cli-plugin-eslint":"^3.9.0","@vue/cli-service":"^3.9.0","babel-eslint":"^10.0.1","babel-plugin-component":"^1.1.1","babel-plugin-import":"^1.12.0","css-loader":"^3.0.0","es6-promise":"^4.2.8","eslint":"^5.16.0","eslint-plugin-vue":"^5.0.0","js-audio-recorder":"^1.0.4","less-loader":"^5.0.0","node-sass":"^4.9.2","qrcodejs2":"0.0.2","sass-loader":"^7.0.3","script-loader":"^0.7.2","stylus":"^0.54.5","stylus-loader":"^3.0.2","vue-cli-plugin-element":"^1.0.1","vue-template-compiler":"^2.6.10"},"eslintConfig":{"root":true,"env":{"node":true},"extends":["plugin:vue/essential","eslint:recommended"],"rules":{"no-console":0},"parserOptions":{"parser":"babel-eslint"}},"postcss":{"plugins":{"autoprefixer":{}}},"browserslist":["> 1%","last 2 versions","not ie <= 8"]}')},a265:function(e,t,n){"use strict";var a=n("ae7c"),s=n.n(a);s.a},ae7c:function(e,t,n){},d7e3:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",class:e.containerClass,attrs:{id:"app"}},[n("div",[n("ul",{staticClass:"setting-list"},[n("li",[n("div",{staticClass:"list-title"},[e._v("\n          节假日信息\n          "),n("button",{staticClass:"btn",attrs:{disabled:e.disabled,title:"点击更新节假日信息"},on:{click:e.getHoliday}},[e._v("\n            更新\n          ")]),e.disabled?n("span",{staticClass:"loading"},[e._v("更新中。。。")]):e._e()]),n("p",[e.holiday?n("span",[e._v("\n            当前版本：v"+e._s(e.holiday.version)+"    最后节假日日期："+e._s(e.holiday.lastDate)+"\n          ")]):e._e()]),n("p",[e._v("\n          tips：更新节假日信息，可以在节假日暂停更新估值，节假日信息会不定时更新。\n          "),n("a",{attrs:{href:"#"},on:{click:e.openHoliday}},[e._v("查看最新版")])])]),n("li",[n("div",{staticClass:"list-title"},[e._v("主题设置")]),n("div",{staticClass:"select-row"},[n("el-switch",{attrs:{"active-color":"#484848","inactive-color":"#13ce66","inactive-text":"标准模式","active-text":"暗色模式"},on:{change:e.changeDarkMode},model:{value:e.darkMode,callback:function(t){e.darkMode=t},expression:"darkMode"}})],1)]),n("li",[n("div",{staticClass:"list-title"},[e._v("Title设置")]),n("div",{staticClass:"select-row"},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#484848","inactive-text":"标准模式","active-text":"增强模式","inactive-value":"2","active-value":"1"},on:{change:e.changeBadgeMode},model:{value:e.showBadge,callback:function(t){e.showBadge=t},expression:"showBadge"}})],1),1==e.showBadge?n("div",{staticClass:"select-row"},[e._v("\n          显示：\n\n          "),n("el-radio-group",{attrs:{size:"small"},on:{change:function(t){return e.changeOption(t,"BadgeType",!0)}},model:{value:e.BadgeType,callback:function(t){e.BadgeType=t},expression:"BadgeType"}},[n("el-radio",{attrs:{border:"",label:1}},[e._v("日收益率")]),n("el-radio",{attrs:{border:"",label:2}},[e._v("日收益额")])],1)],1):e._e(),n("p",{staticStyle:{"margin-top":"5px"}},[e._v("\n          tips：若选择增强模式，title会变为当日收益率或收益额\n        ")])]),n("li",[n("div",{staticClass:"list-title"},[e._v("基金列表展示内容设置")]),n("div",{staticClass:"select-row"},[n("span",[e._v("显示估算净值")]),n("el-switch",{on:{change:function(t){return e.changeOption(t,"showGSZ")}},model:{value:e.showGSZ,callback:function(t){e.showGSZ=t},expression:"showGSZ"}})],1),n("div",{staticClass:"select-row"},[n("span",[e._v("显示持有金额")]),n("el-switch",{on:{change:function(t){return e.changeOption(t,"showAmount")}},model:{value:e.showAmount,callback:function(t){e.showAmount=t},expression:"showAmount"}})],1),n("div",{staticClass:"select-row"},[n("span",[e._v("显示估值收益")]),n("el-switch",{on:{change:function(t){return e.changeOption(t,"showGains")}},model:{value:e.showGains,callback:function(t){e.showGains=t},expression:"showGains"}})],1),n("div",{staticClass:"select-row"},[n("span",[e._v("显示持有收益")]),n("el-switch",{on:{change:function(t){return e.changeOption(t,"showCost")}},model:{value:e.showCost,callback:function(t){e.showCost=t},expression:"showCost"}})],1),n("div",{staticClass:"select-row"},[n("span",[e._v("显示持有收益率")]),n("el-switch",{on:{change:function(t){return e.changeOption(t,"showCostRate")}},model:{value:e.showCostRate,callback:function(t){e.showCostRate=t},expression:"showCostRate"}})],1)]),n("li",[n("div",{staticClass:"list-title"},[e._v("基金配置信息导入与导出")]),n("div",{staticStyle:{padding:"8px 0 10px"}},[n("input",{staticClass:"btn",attrs:{type:"button",value:"导出配置"},on:{click:e.exportConfig}}),n("a",{ref:"configMsg",staticClass:"exportBtn",attrs:{href:e.configHref,download:e.timer+"基金配置.json"}}),n("a",{staticClass:"uploadFile btn",attrs:{href:"javascript:;"}},[e._v("导入配置\n            "),n("input",{ref:"importInput",attrs:{type:"file"},on:{change:e.importInput}})])]),n("p",[e._v("\n          tips：插件本身支持跟随浏览器账号自动同步，若想手动同步可使用导入导出功能。\n        ")])]),n("button",{staticClass:"btn primary",staticStyle:{"margin-top":"15px"},on:{click:e.goBack}},[e._v("\n        返回主页\n      ")])])])])},s=[],o=n("bd86"),i=n("527b"),r=n("9224"),l=r.version,c={components:{},data:function(){return{configHref:null,holiday:null,disabled:!1,showGSZ:!1,showAmount:!1,showGains:!1,showCost:!1,showCostRate:!1,darkMode:!1,showBadge:1,BadgeContent:2,BadgeType:1,version:l,timer:null}},mounted:function(){this.initOption();var e=new Date,t=e.getFullYear(),n="0".concat(e.getMonth()+1).slice(-2),a="0".concat(e.getDate()).slice(-2);this.timer="".concat(t).concat(n).concat(a),console.log(this.timer)},watch:{},computed:{containerClass:function(){if(this.darkMode)return"darkMode"}},methods:{changeOption:function(e,t,n){var a=this;i["b"].set(Object(o["a"])({},t,e),(function(){a[t]=e,n&&i["a"].runtime.sendMessage({type:"refreshOption",data:{type:t,value:e}})}))},initOption:function(){var e=this;i["b"].get(["holiday","showNum","showAmount","showGains","showCost","showCostRate","showGSZ","darkMode","showBadge","BadgeContent","BadgeType"]).then((function(t){t.showNum?(i["b"].set({showNum:!1}),i["b"].set({showAmount:!0},(function(){e.showAmount=!0})),i["b"].set({showGains:!0},(function(){e.showGains=!0}))):(e.showAmount=!!t.showAmount&&t.showAmount,e.showGains=!!t.showGains&&t.showGains),t.holiday?e.holiday=t.holiday:e.getHoliday(),e.showGSZ=!!t.showGSZ&&t.showGSZ,e.showCost=!!t.showCost&&t.showCost,e.showCostRate=!!t.showCostRate&&t.showCostRate,e.darkMode=!!t.darkMode&&t.darkMode,e.showBadge=t.showBadge?t.showBadge:1,e.BadgeContent=t.BadgeContent?t.BadgeContent:2,e.BadgeType=t.BadgeType?t.BadgeType:1}))},exportConfig:function(){var e=this;i["b"].get(null).then((function(t){delete t.holiday,e.configHref="data:text/plain,"+JSON.stringify(t),setTimeout((function(){e.$refs["configMsg"].click()}),200)}))},importInput:function(e){var t=this,n=e.target.files;if(!n||!n.length)throw new Error("No files");var a=new FileReader;a.onload=function(n){try{var a=JSON.parse(n.target.result);return i["b"].set(a,(function(e){t.initOption(),i["a"].runtime.sendMessage({type:"refresh"}),t.$message({message:"恭喜,导入配置成功！",type:"success",center:!0,duration:1e3}),t.$refs.importInput.value=null})),a}catch(e){t.$message({message:"导入失败！",type:"error",center:!0,duration:1e3})}},a.readAsText(n[0])},getHoliday:function(){var e=this;this.disabled=!0;var t="/rabt/funds/holiday.json";this.$axios.get(t).then((function(t){console.log(11,t),i["b"].set({holiday:t},(function(){e.holiday=t,e.disabled=!1}))}))},goBack:function(){this.$router.push("/")},openHoliday:function(){window.open("/rabtfunds/holiday.json")},changeDarkMode:function(){i["b"].set({darkMode:this.darkMode})},changeBadgeMode:function(){i["b"].set({showBadge:this.showBadge}),this.changeOption(this.showBadge,"showBadge",!0)}}},d=c,u=(n("a265"),n("0c7c")),h=Object(u["a"])(d,a,s,!1,null,"5ec9afb2",null);t["default"]=h.exports}}]);